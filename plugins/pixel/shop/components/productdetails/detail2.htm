<div class="product-info-to-cart">
    {% if product.type == 'product' %}
    <form data-request="onAddToCart" data-request-flash data-request-success="CartButton.onSuccess(data)" id="form-add-to-cart">
		<h1 id="product-title">
			{{ product.name }}
		</h1>
		<h4 id="product-option-title"></h4>
		<div class="text-uppercase-master row-border-master">
		</div>

		{% if product.categories|length > 0 %}
		{% endif %}

		<div class="publish-date">
			<span class="published-date">
				Published Date: {{ product.created_at|date('Y/m/d') }}
			</span>
			<span class="author-product">
				Author: {{product.author}}
			</span>
		</div>

		<div class="show-description">
            {{ product.description|raw }}
		</div>
		<div class="share-buttons pull-left-share">
			{% partial '@share-buttons' %}
		</div>

		<hr>

		<div class="form-group">
            <div class="wrap-product-detail">
			        <h3 id="product-price" class="shop__product-price" style="display:none;"></h3>
                    <!-- <span class="shop__product-price-amount price-product-amount" data-currency="{{ product.getDefaultCurrencySymbol() }}">
                        {{ product.getPrice()|currency }}
                    </span>

                    <input type="hidden" name="base_price" value="{{ product.getPrice(false) }}">
                    <input type="hidden" name="old_price" value="{{ product.getOldPrice(false) }}">

                    <input type="hidden" name="base_price_with_tax" value="{{ product.getPrice() }}">
                    <input type="hidden" name="old_price_with_tax" value="{{ product.getOldPrice() }}"> -->

                    <!-- {% if product.is_on_sale %}
                        &nbsp;
                        <small class="shop__product-old-price">
                            <strike class="text-danger">
                                <span class="shop__product-price-old" data-currency="{{ product.getDefaultCurrencySymbol() }}">{{ product.getOldPrice()|currency }}</span>
                            </strike>
                        </small>
                    {% endif %} -->
                <!-- </h3> -->
                <div class="price-product" style="float: left;">
                    <span class="shop__product-price-amount price-product-amount" data-currency="{{ product.getDefaultCurrencySymbol() }}">
                        {{ product.getPrice()|currency }}
                    </span>
                    <input type="hidden" name="base_price" value="{{ product.getPrice(false) }}">
                    <input type="hidden" name="old_price" value="{{ product.getOldPrice(false) }}">

                    <input type="hidden" name="base_price_with_tax" value="{{ product.getPrice() }}">
                    <input type="hidden" name="old_price_with_tax" value="{{ product.getOldPrice() }}">
                </div>
                <input name="quantity" type="hidden" value="1" min="1">
                <input name="type_buy" type="hidden" id="type_buy" value="cart_buy_money">
                <input name="price_download" id="price_download" type="hidden">
                <input name="email_download" id="email_download" type="hidden">
                <input name="quantity" type="hidden" value="1" min="1">
                <input type="hidden" name="id" value="{{ product.id }}">
                <input type="hidden" name="price" value="{{ product.price }}">
                <input type="hidden" name="options" value="">
                <input type="hidden" name="options_index" value="">
                <!-- <div class="btn-more blu">
                    <a href="" title="">{{ 'pixel.shop::lang.frontend.addtocart'|trans }}</a>
                </div> -->
                <button type="submit" class="btn btn-primary btn-block btn-footer add-to-cart-btn" data-attach-loading>
                    {{ 'pixel.shop::lang.frontend.addtocart'|trans }}
                </button>

                <button type="button" class="btn btn-primary btn-block btn-footer download-book-btn" data-toggle="modal" data-target="#exampleModalCenter">
                    Download Digtal
                </button>
            </div>
            <hr>
		</div>
	</form>
    {% else %}
        <form data-request="onAddToCart" data-request-flash data-request-success="CartButton.onSuccess(data)">
            <h1 id="product-title">
                {{ product.name }}
            </h1>
            <h4 id="product-option-title"></h4>
            <div class="text-uppercase row-border">
                {% if product.is_on_sale %}
                    <span class="label label-success">{{ 'pixel.shop::lang.frontend.onsale'|trans }}</span>
                {% endif %}
        
                {% if product.quantity > 0 %}
                    <span class="label label-success">{{ 'pixel.shop::lang.frontend.instock'|trans }}</span>
                {% endif %}
        
                {% if not product.isInfiniteQuantity() and product.quantity == 0 %}
                    <span class="label label-danger">{{ 'pixel.shop::lang.frontend.soldout'|trans }}</span>
                {% endif %}
            </div>
        
            {% if product.categories|length > 0 %}
            <p><small><i class="fas fa-tag"></i> {{ product.categories.lists('name')|join(', ') }}</small></p>
            {% endif %}
        
            <hr>
        
            <div class="form-group">
                <h3 id="product-price" class="shop__product-price">
                    <span class="shop__product-price-amount" data-currency="{{ product.getDefaultCurrencySymbol() }}">
                        {{ product.getPrice()|currency }}
                    </span>
        
                    <input type="hidden" name="base_price" value="{{ product.getPrice(false) }}">
                    <input type="hidden" name="old_price" value="{{ product.getOldPrice(false) }}">
        
                    <input type="hidden" name="base_price_with_tax" value="{{ product.getPrice() }}">
                    <input type="hidden" name="old_price_with_tax" value="{{ product.getOldPrice() }}">
        
                    {% if product.is_on_sale %}
                        &nbsp;
                        <small class="shop__product-old-price">
                            <strike class="text-danger">
                                <span class="shop__product-price-old" data-currency="{{ product.getDefaultCurrencySymbol() }}">{{ product.getOldPrice()|currency }}</span>
                            </strike>
                        </small>
                    {% endif %}
                </h3>
            </div>
        
            {% if product.brand %}
            <div class="form-group">
                {{ 'pixel.shop::lang.frontend.brand'|trans }}
        
                {% if (product.brand.url) %}
                    <strong><a href="{{ product.brand.url }}">{{ product.brand.name }}</a></strong>
                {% else %}
                    <strong>{{ product.brand.name }}</strong>
                {% endif %}
            </div>
            {% endif %}
        
            <div class="form-group">
                <div class="product-detail-description ">
                    {{ product.description|raw }}
                </div>
            </div>
        
            <br>
        
            {% if product.attachments|length > 0 %}
                <hr>
                <h4>{{ 'pixel.shop::lang.frontend.attachments'|trans }}</h4>
                {% for file in product.attachments %}
                    <a href="{{ file.path }}" target="_blank"><i class="fas fa-download"></i> {{ file.title ?  file.title : file.file_name }}</a><br />
                {% endfor %}
                <hr>
            {% endif  %}
        
            {% if product.is_with_variants %}
                {% for variant in product.variants %}
                    <div class="form-group row">
                        <label class="col-md-3 text-right">{{ variant.variant }}</label>
                        <div class="col-md-6">
                            <select name="option[{{ product.slugOption(variant.variant) }}]" class="form-control shop__product-option" data-label="{{ variant.variant }}" data-slug="{{ variant.id }}">
                                <option value="" data-quantity="">{{ 'pixel.shop::lang.frontend.select_option'|trans }}</option>
        
                                {% for option in variant.items %}
                                    {% if product.checkIfOutStock(option.quantity) %}
                                        <option value="{{ option.ref }}" data-price="{{ product.getPriceOption(option.price) }}" data-tax={{ product.getTaxOption(option.price) }} data-quantity="{{ option.quantity }}" disabled="disabled">
                                            {{ option.val }} ({{ 'pixel.shop::lang.messages.out_of_stock'|trans }})
                                        </option>
                                    {% else %}
                                        <option value="{{ option.ref }}" data-price="{{ product.getPriceOption(option.price) }}" data-tax={{ product.getTaxOption(option.price) }} data-quantity="{{ option.quantity }}">
                                            {{ option.val }}
                                        </option>
                                    {% endif %}
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                {% endfor %}
            {% endif %}
        
            {% if product.quantity > 0 or product.isInfiniteQuantity() %}
                <div class="form-group row">
                    <label class="col-md-3 text-right">{{ 'pixel.shop::lang.fields.quantity'|trans }}</label>
                    <div class="col-md-3 text-right">
                        <div class="number-input shop__product-qty">
                            <button type="button" onclick="this.parentNode.querySelector('input[type=number]').stepDown()" ></button>
                            <input name="quantity" type="number" class="form-control text-center" value="1" min="1">
                            <button type="button" onclick="this.parentNode.querySelector('input[type=number]').stepUp()" class="plus"></button>
                        </div>
                    </div>
                </div>
        
                <input type="hidden" name="id" value="{{ product.id }}">
                <input type="hidden" name="price" value="{{ product.price }}">
                <input type="hidden" name="options" value="">
                <input type="hidden" name="options_index" value="">
                <button type="submit" class="btn btn-primary btn-block btn-footer" data-attach-loading>
                    <span class="fas fa-shopping-cart" aria-hidden="true"></span> 
                    {{ 'pixel.shop::lang.frontend.addtocart'|trans }}
                </button>
            {% endif %}
        </form>
        
        <hr>
        
        <div class="share-buttons pull-right">
            {% partial '@share-buttons' %}
        </div>
    {% endif %}
</div>
<div class="facabook-comment">
    <h3>FeedBack</h3>
    </br>
    {% if not (__SELF__.options['page_url'] is empty) %}
    {% set page_url = __SELF__.options['page_url'] %}
    {% endif %}

    {% if not (__SELF__.options['custom_css'] is empty) %}
    {% set custom_css = __SELF__.options['custom_css'] %}
    {% else %}
    {% set custom_css = '' %}
    {% endif %}

    {% if not (page_url is empty) %}
    <div class="fb-comments {{custom_css}}" data-href="{{page_url}}" {% if not (__SELF__.options['width'] is empty) %}data-width="{{__SELF__.options['width']}}"{% endif %} data-numposts="{{__SELF__.options['posts_number']}}" data-colorscheme="{{__SELF__.options['color']}}"></div>
    {% else %}
    <div style="text-align: center;">
        <span style="color:red;font-weight: bold;"> 
            Error : facebook comments box cannot be displayed. <br>
            You have to set up the url of the page to comment
        </span>
    </div>
    {% endif %}
</div>

  <!-- Modal -->
  <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLongTitle">Download Digtal</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <form action="" method="POST" role="form">
                <div id="form-download-book"></div>
                <div class="form-group">
                    <div data-owl="money" class="owl-money" data-alias="formPrice">
                        <label for="">Price</label>
                        <input type="text" name="price" class="form-control owl-money-input " placeholder="0.00" id="value-price" required="">
                        </br>
                        <button type="button" id="btn-download" class="btn btn-primary">Submit</button>
                    </div>
                   
                </div>
                
            </form>
            
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div>
      </div>
    </div>
  </div>